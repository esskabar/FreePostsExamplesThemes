{"version":3,"sources":["main.js"],"names":["$","undefined","setEqualHeight","columns","pddingBottom","tallestcolumn","each","currentHeight","height","document","ready","Modernizr","mq","css","window","resize","hasClass","scroll","true_posts","doc_scrollTop","scrollTop","height_window","offset_main","offset","top","height_main","height_art","data","current_page","ajax","url","ajaxurl","type","beforeSend","xhr","addClass","success","search","before","removeClass","console","log","jQuery"],"mappings":"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","file":"main.js","sourcesContent":["'use strict';\n/* global Modernizr */\n\n(function($, undefined){\n\n  function setEqualHeight(columns, pddingBottom = 0)\n  {\n    var tallestcolumn = 0;\n    columns.each(\n      function()\n      {\n        var currentHeight = $(this).height();\n        if(currentHeight > tallestcolumn)\n        {\n          tallestcolumn = currentHeight;\n        }\n      }\n    );\n    columns.height(tallestcolumn + pddingBottom);\n  }\n  $(document).ready(function() {\n\n    if (Modernizr.mq('(min-width: 768px)')) {\n      $('#three_blocks .three_blocks_item').height('auto');\n      setEqualHeight($('#three_blocks .three_blocks_item'));\n      $('#three_blocks .three_blocks_item .tb_category').css('position', 'absolute');\n\n      setEqualHeight($('.equal_footer'));\n\n      $('.main_block_item_wrap .main_block_item .mb_read_more').css('position', 'relative');\n      $('.main_block_item_wrap .main_block_item').height('auto');\n      setEqualHeight($('.main_block_item_wrap .main_block_item'));\n      $('.main_block_item_wrap .main_block_item .mb_read_more').css('position', 'absolute');\n\n    } else {\n      $('#three_blocks .three_blocks_item').height('auto');\n      $('#three_blocks .three_blocks_item .tb_category').css('position', 'absolute');\n\n      $('.main_block_item_wrap .main_block_item .mb_read_more').css('position', 'relative');\n      $('.main_block_item_wrap .main_block_item').height('auto');\n    }\n\n  });\n  $(window).resize(function(){\n    if (Modernizr.mq('(min-width: 768px)')) {\n      $('#three_blocks .three_blocks_item').height('auto');\n      setEqualHeight($('#three_blocks .three_blocks_item'));\n      $('#three_blocks .three_blocks_item .tb_category').css('position', 'absolute');\n\n      setEqualHeight($('.equal_footer'));\n\n      $('.main_block_item_wrap .main_block_item .mb_read_more').css('position', 'relative');\n      $('.main_block_item_wrap .main_block_item').height('auto');\n      setEqualHeight($('.main_block_item_wrap .main_block_item'));\n      $('.main_block_item_wrap .main_block_item .mb_read_more').css('position', 'absolute');\n\n    } else {\n      $('#three_blocks .three_blocks_item').height('auto');\n      $('#three_blocks .three_blocks_item .tb_category').css('position', 'absolute');\n\n      $('.equal_footer').height('auto');\n\n\n      $('.main_block_item_wrap .main_block_item .mb_read_more').css('position', 'relative');\n      $('.main_block_item_wrap .main_block_item').height('auto');\n    }\n  });\n\n  //infinity scroll\n  if ($('body').hasClass('home') || $('body').hasClass('category') || $('body').hasClass('author') || $('body').hasClass('search')) {\n    $(window).scroll(function () {\n      if (typeof true_posts != 'undefined') {\n        var doc_scrollTop = $(window).scrollTop();\n        var height_window = $(window).height();\n        var offset_main = $('.main_block_item_wrap').offset().top;\n        var height_main = $('.main_block_item_wrap ').height();\n        var height_art = $('.main_block_item_wrap .main_block_item').height();\n        var data = {\n          'action': 'loadmore',\n          'query': true_posts,\n          'page': current_page\n        };\n        if (doc_scrollTop > offset_main + height_main - height_window - 2 * height_art && !$('body').hasClass('loading')) {\n          $.ajax({\n            url: ajaxurl,\n            data: data,\n            type: 'POST',\n            beforeSend: function beforeSend(xhr) {\n              $('body').addClass('loading');\n            },\n            success: function success(data) {\n              if (data != '' && data != 'no posts found' && data.search(/<div class=\"main_block_item/) != -1) {\n                $('#true_loadmore').before(data);\n\n                $('.main_block_item_wrap .main_block_item .mb_read_more').css('position', 'relative');\n                $('.main_block_item_wrap .main_block_item').height('auto');\n                setEqualHeight($('.main_block_item_wrap .main_block_item'));\n                $('.main_block_item_wrap .main_block_item .mb_read_more').css('position', 'absolute');\n\n                $('body').removeClass('loading');\n                current_page++;\n              } else {\n                console.log(data);\n              }\n            }\n          });\n        }\n      }\n    });\n  }\n\n})(jQuery);\n"]}